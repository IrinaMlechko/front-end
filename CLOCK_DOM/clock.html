<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href='style.css' rel='stylesheet' type='text/css'>
    <title>Часики</title>
</head>
<body>
<div id='Input'>
    <div>
        Введите диаметр часов в пикселях:
    </div>

    <input id="diameter" max="800" min="200" type="number" value="200">
    <input onclick='createClock()' type='button' value='Построить часы'>
</div>

<div class="circle" id="circle">
    <div id="currentTime"></div>
    <div class="Hand" id = "HourHand"></div>
    <div class="Hand" id = "MinuteHand"></div>
    <div class="Hand" id = "SecondHand"></div>
    <div class="little-circle" id="0">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="1">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="2">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="3">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="4">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="5">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="6">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="7">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="8">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="9">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="10">
        <div class="time"></div>
    </div>
    <div class="little-circle" id="11">
        <div class="time"></div>
    </div>
</div>

<script>
    const offsetTop = 5;
    const degreeForOneRotate = 360 / 12;
    const amountOfMinutesInHour = 60;

    function createClock() {
        const diameterOfClock = document.getElementById('diameter').value;
        const diameterOfLittleCircle = diameterOfClock / 10;
        const offsetLeft = (diameterOfClock - diameterOfLittleCircle) / 2;
        const handPositionLeft = diameterOfClock/2;
        const handPositionTop = diameterOfClock/2;

        updateTime();
        let clock = document.getElementById("circle");
        clock.style.width = `${diameterOfClock}px`;
        clock.style.height = `${diameterOfClock}px`;
        hideInput();
        let allLittleCircles = document.querySelectorAll(".little-circle");
        let counterDegree = 0;
        for (let i = 0; i < allLittleCircles.length; i++) {
            allLittleCircles[i].style.width = `${diameterOfLittleCircle}px`;
            allLittleCircles[i].style.height = `${diameterOfLittleCircle}px`;
            allLittleCircles[i].style.left = `${offsetLeft}px`;
            allLittleCircles[i].style.transformOrigin = `50% ${diameterOfClock / 2 - offsetTop}px`;
            allLittleCircles[i].style.transform = `rotate(${counterDegree}deg)`;
            let timeElement = allLittleCircles[i].querySelector(".time");
            timeElement.innerHTML = i.toString();
            timeElement.style.top = `50%`;
            timeElement.style.left = `50%`;
            timeElement.style.transform = `translate(-50%, -50%) rotate(-${counterDegree}deg)`;
            counterDegree = counterDegree + degreeForOneRotate;

        }

        setInterval(updateTime,1000);

        function updateTime() {
            const currTime=new Date();
            console.log(currTime);
            document.getElementById('currentTime').innerHTML=formatDateTime(currTime);
            setHandsPositions(currTime);
        }
        function setHandsPositions(currTime) {
            let hands = document.querySelectorAll(".Hand");
            hands.forEach((hand) => {
                hand.style.top = `${handPositionTop}px`;
                hand.style.left = `${handPositionLeft}px`;
            });

            let hourHand = document.getElementById("HourHand");
            let degreeForHourHand = (currTime.getHours() % 12 + currTime.getMinutes() / 60) * 30;
            hourHand.style.transform = `translateX(-50%) translateY(-100%) rotate(${degreeForHourHand}deg)`;

            let minuteHand = document.getElementById("MinuteHand");
            let degreeForMinuteHand = currTime.getMinutes() * 6;
            minuteHand.style.transform = `translateX(-50%) translateY(-100%) rotate(${degreeForMinuteHand}deg)`;

            let secondHand = document.getElementById("SecondHand");
            let degreeForSecondHand = currTime.getSeconds() * 6;
            secondHand.style.transform = `translateX(-50%) translateY(-100%) rotate(${degreeForSecondHand}deg)`;

        }

        function formatDateTime(dt) {
            const hours=dt.getHours();
            const minutes=dt.getMinutes();
            const seconds=dt.getSeconds();
            return str0l(hours,2) + ':' + str0l(minutes,2) + ':' + str0l(seconds,2);
        }

        function str0l(val,len) {
            let strVal=val.toString();
            while ( strVal.length < len )
                strVal='0'+strVal;
            return strVal;
        }

    }

    function hideInput() {
        let input = document.getElementById('Input');
        input.style.display = 'none';
    }
</script>
</body>
</html>